webpackJsonp([3,2],{0:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var n=i(17),r=s(n),a=i(79),o=s(a),I=i(80),u=s(I);i(64);var A=i(69),c=s(A);i(57);var l=i(71),d=s(l),f=i(15),v=s(f),g=i(1),h=function(e){i.e(1,function(){e(i(16))})},m=function(e){return i.e(0,function(t){var i=[t(73)];e.apply(null,i)}.bind(this))};r.default.use(o.default),r.default.use(c.default),u.default.registerCustomEvent("dbltap",{type:"tap",taps:2}),r.default.use(u.default,{name:"v-touch"});var p=[{path:"/login",component:v.default,name:"login",meta:{requiresAuth:!1}},{path:"/registe",component:h,name:"registe",meta:{requiresAuth:!1}},{path:"/todo",component:m,name:"todo",meta:{requiresAuth:!0}},{path:"*",redirect:{path:"/login"}}],w=new o.default({routes:p});w.beforeEach(function(e,t,i){e.matched.some(function(e){return e.meta.requiresAuth})&&(g.isLogedin||i({path:"/login"})),i()}),new r.default({el:"#app",template:"<App/>",components:{App:d.default},router:w})},1:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(18),n="qNpVPquXEti01HpThDRcqiHl-gzGzoHsz",r="KB8jNrxQz0i7WFCH9fYbXYtt";s.init({appId:n,appKey:r});var a=t.Todo=s.Object.extend("Todo"),o=(t.requestLogin=function(e){return s.User.logIn(e.email,e.password)},t.isLogedin=function(){return!!s.User.current()},t.getCurrentUser=function(){return s.User.current()});t.logOut=function(){s.User.logOut()},t.registeUser=function(e){var t=new s.User;return t.setUsername(e.username),t.setPassword(e.password),t.setEmail(e.email),t.signUp()},t.AddTodoItem=function(e){var t=new s.ACL;t.setPublicReadAccess(!1),t.setPublicWriteAccess(!1),t.setWriteAccess(s.User.current(),!0),t.setReadAccess(s.User.current(),!0);var i=new a(e);return i.setACL(t),i.set("owner",o().id),i.save()},t.SaveTodoItem=function(e){acl.setPublicReadAccess(!1),acl.setPublicWriteAccess(!1),acl.setWriteAccess(s.User.current(),!0),acl.setReadAccess(s.User.current(),!0);var t=new a(e);return t.setACL(acl),t.save()},t.LoadServerTodos=function(){var e=o().id,t=new s.Query("Todo");t.equalTo("owner",e);var i=new s.Query("Todo");return i.equalTo("enable",!0),new s.Query.and(t,i).find()},t.addRole=function(){var e=new s.ACL;e.setPublicReadAccess(!1),e.setPublicWriteAccess(!1),e.setWriteAccess(s.User.current(),!0);var t=new s.Role("User",e);t.save().then(function(e){console.log(e)},function(e){console.log(e)})}},5:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dateFormat=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},t.emailCheck=function(e){var t=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;return t.test(e)}},14:function(e,t){e.exports="data:image/png;base64,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"},15:function(e,t,i){i(58);var s=i(2)(i(21),i(74),"data-v-1f74926b",null);e.exports=s.exports},19:function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(15),r=s(n);t.default={name:"app",components:{Login:r.default}}},21:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),n=i(5);t.default={data:function(){return{email:"",password:"",snackbar:!1,emptyMessage:"",isBtnLoading:!1,showLoginFailDialog:!1,errorLoginMsg:""}},computed:{btnText:function(){return this.isBtnLoading?"登录中...":"登录"},errorEmailMsg:function(){return this.email?(0,n.emailCheck)(this.email)?"":"邮箱格式不正确":""},errorPasswordMsg:function(){return this.password&&this.password.length<6?"密码长度必须不能小于6位":""}},methods:{login:function(){var e=this;if(!this.email)return this.emptyMessage="请填写邮箱",void this.showSnackbar();if(!this.password)return this.emptyMessage="请填写密码",void this.showSnackbar();var t={email:this.email,password:this.password};this.isBtnLoading=!0,(0,s.requestLogin)(t).then(function(t){e.isBtnLoading=!1,e.$router.push({name:"todo"})},function(t){switch(t.code){case 211:e.errorLoginMsg="用户不存在，立即注册一个吧~",e.email="",e.password="";break;case 210:e.errorLoginMsg="用户名与密码不匹配，请重新输入密码。",e.password="";break;default:e.errorLoginMsg="赶紧注册一个账号并开始使用吧~~"}e.isBtnLoading=!1,e.showLoginFailDialog=!0})},registe:function(){this.$router.push({name:"registe"})},showSnackbar:function(){var e=this;this.snackbar=!0,this.snackTimer&&clearTimeout(this.snackTimer),this.snackTimer=setTimeout(function(){e.snackbar=!1},2e3)},hideSnackbar:function(){this.snackbar=!1,this.snackTimer&&clearTimeout(this.snackTimer)},closeLoginFailDialog:function(){this.showLoginFailDialog=!1}},mounted:function(){(0,s.isLogedin)()&&this.$router.push({name:"todo"})}}},57:function(e,t){},58:function(e,t){},62:function(e,t){},64:function(e,t){},71:function(e,t,i){i(62);var s=i(2)(i(19),i(77),null,null);e.exports=s.exports},74:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("mu-row",{attrs:{gutter:""}},[s("mu-col",{staticClass:"center",attrs:{width:"100",tablet:"70",desktop:"33"}},[s("img",{attrs:{src:i(14),alt:""}}),e._v(" "),s("mu-text-field",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{label:"邮箱",hintText:"请输入邮箱",type:"email",icon:"email",fullWidth:"",errorText:e.errorEmailMsg},domProps:{value:e.email},on:{input:function(t){e.email=t}}}),e._v(" "),s("mu-text-field",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{label:"密码",hintText:"请输入密码",type:"password",icon:"remove_red_eye",fullWidth:"",errorText:e.errorPasswordMsg},domProps:{value:e.password},on:{input:function(t){e.password=t}}})],1)],1),e._v(" "),s("mu-row",{attrs:{gutter:""}},[s("mu-col",{staticClass:"center",attrs:{width:"100",tablet:"70",desktop:"33"}},[s("mu-raised-button",{staticClass:"btn",attrs:{label:e.btnText,primary:"",disabled:e.isBtnLoading},nativeOn:{click:function(t){e.login(t)}}}),e._v(" "),s("p",[e._v("还没有账号？注册一个吧~\n        "),s("mu-flat-button",{attrs:{label:"立即注册",secondary:""},nativeOn:{click:function(t){e.registe(t)}}})],1)],1)],1),e._v(" "),e.snackbar?s("mu-snackbar",{attrs:{message:e.emptyMessage,action:"关闭"},on:{actionClick:e.hideSnackbar,close:e.hideSnackbar}}):e._e(),e._v(" "),s("mu-dialog",{attrs:{open:e.showLoginFailDialog,title:"登录失败"}},[s("span",[e._v(e._s(e.errorLoginMsg))]),e._v(" "),s("mu-flat-button",{attrs:{label:"确定",primary:"",secondary:""},on:{click:e.closeLoginFailDialog},slot:"actions"})],1)],1)},staticRenderFns:[]}},77:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("router-view")},staticRenderFns:[]}}});